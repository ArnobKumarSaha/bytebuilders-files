apiVersion: kubedb.com/v1alpha2
kind: MongoDB
metadata:
  name: simple
  namespace: demo
spec:
  version: "4.4.26"
  terminationPolicy: WipeOut
  replicas: 3
  replicaSet:
    name: "rs"
  podTemplate:
    spec:
      nodeSelector:
        beta.kubernetes.io/instance-type: g6-standard-2
      # tolerations:
      # - key: nodepool
      #   value: medium
      #   effect: NoSchedule
      resources:
        requests:
          "cpu": 1200m
          "memory": 2.5Gi
        limits:
          "cpu": 1900m
          "memory": 3.9Gi
  storage:
    accessModes:
    - ReadWriteOnce
    resources:
      requests:
        storage: 10Gi

# beta.kubernetes.io/instance-type=g6-standard-2 (1/2/4/6)
# recommender/input/cluster_feeder.go -> updatePodMemory() -> pod.Containers[i] = cnt

# go wait.Until(c.Recommender.RunOnce, c.Opts.MetricsFetcherInterval, stopCh)
# for {c.Recommender.RunOnce(); time.Sleep(c.Opts.MetricsFetcherInterval) }